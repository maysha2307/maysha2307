<!-- Sword Slash Animation Overlay -->
<div class="sword-slash-overlay" *ngIf="showSwordSlash" [class.slash-complete]="swordSlashComplete">
  <!-- Slash effect SVG -->
  <svg class="slash-svg" viewBox="0 0 1920 1080" preserveAspectRatio="xMidYMid slice">
    <defs>
      <linearGradient id="slashGradient" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" stop-color="#8b5cf6" stop-opacity="0.8"/>
        <stop offset="50%" stop-color="#a78bfa" stop-opacity="1"/>
        <stop offset="100%" stop-color="#22d3ee" stop-opacity="0.6"/>
      </linearGradient>
      <filter id="glow">
        <feGaussianBlur stdDeviation="8" result="coloredBlur"/>
        <feMerge>
          <feMergeNode in="coloredBlur"/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    
    <!-- Slash line -->
    <path class="slash-line" 
          d="M -200 1200 L 2100 -200" 
          stroke="url(#slashGradient)" 
          stroke-width="6" 
          fill="none"
          filter="url(#glow)"
          stroke-linecap="round"/>
  </svg>
  
  <!-- Screen split halves -->
  <div class="screen-half screen-half-top"></div>
  <div class="screen-half screen-half-bottom"></div>
  
  <!-- Cursed energy particles -->
  <div class="cursed-particles">
    <div class="particle cursed-particle"></div>
    <div class="particle cursed-particle"></div>
    <div class="particle cursed-particle"></div>
    <div class="particle cursed-particle"></div>
    <div class="particle cursed-particle"></div>
    <div class="particle cursed-particle"></div>
    <div class="particle cursed-particle"></div>
    <div class="particle cursed-particle"></div>
  </div>
  
  <!-- Anime-style text reveal -->
  <div class="anime-text-reveal">
    <span class="anime-text-line">Welcome to</span>
    <span class="anime-text-main">Our Anime World</span>
  </div>
</div>

<!-- Loading Overlay -->
<div class="loading-overlay" *ngIf="!animationsLoaded">
  <div class="loader">
    <svg class="loader-heart" viewBox="0 0 24 24" fill="none">
      <!-- Anime-style energy circle -->
      <circle cx="12" cy="12" r="10" stroke="#8b5cf6" stroke-width="2" fill="none" opacity="0.6"/>
      <circle cx="12" cy="12" r="6" fill="#a78bfa" opacity="0.8"/>
    </svg>
    <span class="loader-text">Loading our anime journey...</span>
  </div>
</div>

<!-- Persistent Background -->
<div class="background" [class.blurred]="showCard || showLove" [class.fade-out-bg]="fadeOutBackground" [class.fade-in]="animationsLoaded">
  <!-- Ambient Particles - Cursed Energy Style -->
  <div class="ambient-particles">
    <div class="particle energy-particle"></div>
    <div class="particle energy-particle"></div>
    <div class="particle energy-particle"></div>
    <div class="particle energy-particle"></div>
    <div class="particle energy-particle"></div>
    <div class="particle energy-particle"></div>
    <div class="particle energy-particle"></div>
    <div class="particle energy-particle"></div>
    <div class="particle energy-particle"></div>
    <div class="particle energy-particle"></div>
  </div>
  
  <!-- Floating Energy Orbs (replacing hearts) -->
  <div class="floating-energy">
    <div class="energy-orb"></div>
    <div class="energy-orb"></div>
    <div class="energy-orb"></div>
    <div class="energy-orb"></div>
    <div class="energy-orb"></div>
    <div class="energy-orb"></div>
    <div class="energy-orb"></div>
    <div class="energy-orb"></div>
    <div class="energy-orb"></div>
    <div class="energy-orb"></div>
  </div>
</div>

<!-- Intro Text (fades away) -->
<div class="intro-layer" [class.fade-away]="fadeOutIntro">
  <div class="intro-text">
    <span>Step Into</span>
    <span class="highlight">Our Anime Universe</span>
    <span>Where Every Moment is Epic</span>
    <div id="book-animation" class="book-lottie"></div>
  </div>
</div>

<!-- Password Card Layer -->
<div class="card-container" *ngIf="showCard">
  <div
    class="password-card show"
    [ngClass]="{ 'fade-out': fadeOutCard, 'shake': wrongPassword }"
  >
    <h2>Enter Our Secret Password ðŸ’œ</h2>
    <input
      type="password"
      [(ngModel)]="password"
      placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
      [class.error]="wrongPassword"
      (keyup.enter)="unlock()"
    />
    <div class="error-message" *ngIf="wrongPassword">
      Wrong code! Try the magic word âœ¨
    </div>
    <div class="btn-wrapper">
      <button class="heart-btn energy-btn" (click)="unlock()">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="energyGradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#a78bfa" />
              <stop offset="50%" stop-color="#8b5cf6" />
              <stop offset="100%" stop-color="#6d28d9" />
            </linearGradient>
          </defs>
          <!-- Anime energy symbol -->
          <circle cx="12" cy="12" r="10" stroke="url(#energyGradient)" stroke-width="2" fill="none"/>
          <circle cx="12" cy="12" r="5" fill="url(#energyGradient)"/>
          <path d="M12 2 L12 6 M12 18 L12 22 M2 12 L6 12 M18 12 L22 12" stroke="url(#energyGradient)" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
    </div>

    <!-- Instant feedback spinner while unlock request is in-flight -->
    <div class="unlock-spinner" *ngIf="loading">
      <div class="spinner-heart"></div>
      <div class="spinner-text">Unlockingâ€¦</div>
    </div>
  </div>
</div>

<!-- Love Animation (after success) - Lottie with premium overlay -->
<div class="love-overlay" *ngIf="showLove">
  <div class="love-glow"></div>
  <div id="love-animation" class="love-lottie"></div>
</div>
