<div id="gallery-section" class="section-content">
  <div class="gallery-wrapper">
    <!-- Header -->

    <div class="gallery-header">
      <div class="header-icon">üñºÔ∏è</div>
      <h2>Our Gallery</h2>
      <p class="subtitle">A snap through us being us</p>
    </div>

    <!-- Folders Grid -->
    <div class="folders-container">
      <div
        *ngFor="let folder of folders; trackBy: trackByFolderId"
        class="folder-card"
        [class.empty]="folder.photos.length === 0"
        (click)="openFolder(folder)"
      >
        <!-- Cinematic Photo Display -->
        <div class="folder-preview">
          <!-- Current Photo -->
          <div 
            *ngIf="getCurrentPhoto(folder) as currentPhoto"
            class="preview-image-container"
            [class.transitioning]="folder.isTransitioning"
          >
            <img
              [src]="currentPhoto.googleDriveImageUrl"
              [alt]="folder.name"
              class="preview-image"
              loading="lazy"
            />
            <!-- Cinematic Overlay -->
            <div class="cinematic-overlay"></div>
          </div>

          <!-- Empty State -->
          <div *ngIf="folder.photos.length === 0" class="empty-folder">
            <span class="empty-icon">üìÅ</span>
            <span class="empty-text">No photos yet</span>
          </div>

          <!-- Photo Count Badge -->
          <div *ngIf="folder.photos.length > 0" class="photo-count">
            {{ folder.photos.length }} üì∏
          </div>

          <!-- Slide Indicators -->
          <div *ngIf="folder.photos.length > 1" class="slide-indicators">
            <span 
              *ngFor="let photo of folder.photos; let i = index"
              class="indicator"
              [class.active]="i === folder.currentIndex"
            ></span>
          </div>
        </div>

        <!-- Folder Label -->
        <div class="folder-label">
          <span class="folder-emoji">{{ folder.emoji }}</span>
          <span class="folder-name">{{ folder.name }}</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Full Screen Photo Modal -->
<div 
  *ngIf="selectedFolder"
  class="photo-modal-overlay"
  (click)="closeModal()"
>
  <div class="modal-content" (click)="$event.stopPropagation()">
    <!-- Close Button -->
    <button class="close-btn" (click)="closeModal()" aria-label="Close">
      ‚úï
    </button>

    <!-- Folder Title -->
    <div class="modal-header">
      <span class="folder-emoji">{{ selectedFolder.emoji }}</span>
      <span class="folder-title">{{ selectedFolder.name }}</span>
    </div>

    <!-- Main Photo -->
    <div class="modal-photo-container">
      <img
        *ngIf="selectedFolder.photos[selectedPhotoIndex] as photo"
        [src]="photo.googleDriveImageUrl"
        [alt]="photo.title"
        class="modal-photo"
        loading="lazy"
      />

      

      <!-- Navigation Buttons -->
      <button 
        *ngIf="selectedFolder.photos.length > 1"
        class="nav-btn prev-btn"
        (click)="prevPhoto()"
        aria-label="Previous photo"
      >
        ‚ùÆ
      </button>
      <button 
        *ngIf="selectedFolder.photos.length > 1"
        class="nav-btn next-btn"
        (click)="nextPhoto()"
        aria-label="Next photo"
      >
        ‚ùØ
      </button>

      <!-- Slide Counter -->
      <div *ngIf="selectedFolder.photos.length > 1" class="slide-counter">
        {{ selectedPhotoIndex + 1 }} / {{ selectedFolder.photos.length }}
      </div>

      
    </div>

    <!-- Thumbnail Strip -->
    <div class="thumbnail-strip" *ngIf="selectedFolder.photos.length > 1">
      <div 
        *ngFor="let photo of selectedFolder.photos; let i = index; trackBy: trackById"
        class="thumbnail"
        [class.active]="i === selectedPhotoIndex"
        (click)="selectedPhotoIndex = i"
      >
        <img [src]="photo.googleDriveImageUrl" [alt]="photo.title" loading="lazy" />
      </div>
    </div>
  </div>
</div>

